filter(year >= 2019 | <+ 2023 )
pg_county_crime_old %>%
filter(year >= 2019 | yea <= 2023 )
pg_county_crime_old %>%
filter(year >= 2019 | year <= 2023 )
pg_county_crime_old %>%
filter(year >= 2019 | year <= 2023 ) %>%
group_by(year) %>%
summarize(count = n())
pg_county_crime_old %>%
filter(year >= 2019) %>%
group_by(year) %>%
summarize(count = n())
pg_county_crime_old %>%
filter(year >= 2019, year <= 2023) %>%
group_by(year) %>%
summarize(count = n())
pg_county_crime_old %>%
filter(year >= 2019 | year <= 2023) %>%
group_by(year) %>%
summarize(count = n())
pg_county_crime_old %>%
filter(year >= 2019, year < 2023) %>%
group_by(year) %>%
summarize(count = n())
pg_county_crime_old <- pg_county_crime_old %>%
filter(year >= 2019, year < 2023)
pg_county_crime_old %>%
filter(year >= 2019, year <= 2023)
pg_county_crime_old %>%
filter(year >= 2019, year <= 2023) %>%
group_by(year) %>%
summarize(count = n())
library(tidyverse)
library(janitor)
library(lubridate)
#install.packages('tidygeocoder')
library(tidygeocoder)
#install.packages("curl")
library(curl)
library(ggplot2)
library(ggrepel)
pg_county_crime_old <-  read.csv("data/pg_county_crime.csv")
updated_pg <- read_csv("data/updated_pg.csv")
pg_county_crime_old <- pg_county_crime_old %>%
clean_names()
updated_pg <- updated_pg %>%
clean_names()
#extracting the year column and making the date the correct format
pg_county_crime_old <- pg_county_crime_old %>%
mutate(date = as.Date(date, "%m/%d/%Y"),
year = year(date),
month = month(date)) %>%
filter(date <= "2023-07-01")
updaed_pg <- updated_pg %>%
mutate(date = as.Date(date, "%m/%d/%Y"),
year = year(date),
month = month(date))
# Renaming the crime column to be easier to work with
pg_county_crime_old <-  pg_county_crime_old %>%
rename(crime_type = clearance_code_inc_type)
updated_pg <- updated_pg %>%
rename(crime_type = clearance_code_inc_type)
#Showing distinct crimes: 22 types of crime here.
pg_county_crime_old %>%
distinct(crime_type)
updated_pg %>%
distinct(crime_type)
pg_county_crime_old %>%
filter(year >= 2019, year <= 2023) %>%
group_by(year) %>%
summarize(count = n())
pg_county_crime_old %>%
filter(year >= 2019, year <= 2022) %>%
group_by(year) %>%
summarize(count = n())
updated_pg <- updated_pg %>%
filter(year <= 2023)
pg_county_crime_old %>%
filter(year >= 2019, year <= 2022) %>%
group_by(year) %>%
summarize(count = n())
pg_county_crime_old <- pg_county_crime_old %>%
filter(year >= 2019, year <= 2022) %>%
group_by(year) %>%
summarize(count = n())
updated_pg %>%
filter(year <= 2023)
library(tidyverse)
library(janitor)
library(lubridate)
#install.packages('tidygeocoder')
library(tidygeocoder)
#install.packages("curl")
library(curl)
library(ggplot2)
library(ggrepel)
pg_county_crime_old <-  read.csv("data/pg_county_crime.csv")
updated_pg <- read_csv("data/updated_pg.csv")
pg_county_crime_old <- pg_county_crime_old %>%
clean_names()
updated_pg <- updated_pg %>%
clean_names()
#extracting the year column and making the date the correct format
pg_county_crime_old <- pg_county_crime_old %>%
mutate(date = as.Date(date, "%m/%d/%Y"),
year = year(date),
month = month(date)) %>%
filter(date <= "2023-07-01")
updaed_pg <- updated_pg %>%
mutate(date = as.Date(date, "%m/%d/%Y"),
year = year(date),
month = month(date))
# Renaming the crime column to be easier to work with
pg_county_crime_old <-  pg_county_crime_old %>%
rename(crime_type = clearance_code_inc_type)
updated_pg <- updated_pg %>%
rename(crime_type = clearance_code_inc_type)
#Showing distinct crimes: 22 types of crime here.
pg_county_crime_old %>%
distinct(crime_type)
updated_pg %>%
distinct(crime_type)
pg_county_crime_old <- pg_county_crime_old %>%
filter(year >= 2019, year <= 2022)
updated_pg <- updated_pg %>%
filter(year <= 2023)
library(tidyverse)
library(janitor)
library(lubridate)
#install.packages('tidygeocoder')
library(tidygeocoder)
#install.packages("curl")
library(curl)
library(ggplot2)
library(ggrepel)
pg_county_crime_old <-  read.csv("data/pg_county_crime.csv")
updated_pg <- read_csv("data/updated_pg.csv")
pg_county_crime_old <- pg_county_crime_old %>%
clean_names()
updated_pg <- updated_pg %>%
clean_names()
#extracting the year column and making the date the correct format
pg_county_crime_old <- pg_county_crime_old %>%
mutate(date = as.Date(date, "%m/%d/%Y"),
year = year(date),
month = month(date)) %>%
filter(date <= "2023-07-01")
updated_pg <- updated_pg %>%
mutate(date = as.Date(date, "%m/%d/%Y"),
year = year(date),
month = month(date))
# Renaming the crime column to be easier to work with
pg_county_crime_old <-  pg_county_crime_old %>%
rename(crime_type = clearance_code_inc_type)
updated_pg <- updated_pg %>%
rename(crime_type = clearance_code_inc_type)
#Showing distinct crimes: 22 types of crime here.
pg_county_crime_old %>%
distinct(crime_type)
updated_pg %>%
distinct(crime_type)
pg_county_crime_old <- pg_county_crime_old %>%
filter(year >= 2019, year <= 2022)
updated_pg <- updated_pg %>%
filter(year <= 2023)
View(updated_pg)
rm(list="updated_pg")
pg_county_crime_old <-  read.csv("data/pg_county_crime.csv")
pg_county_crime_old <- pg_county_crime_old %>%
clean_names() %>%
mutate(date = as.Date(date, "%m/%d/%Y"),
year = year(date),
month = month(date)) %>%
rename(crime_type = clearance_code_inc_type)
View(pg_county_crime_old)
pg_county_crime_old <- pg_county_crime_old %>%
filter(year >= 2019, year <= 2022)
pg_stolen <- pg_county_crime_old %>%
filter(crime_type == "AUTO, STOLEN" | crime_type == "AUTO, STOLEN & RECOVERED" )
View(pg_stolen)
pg_stolen_auto %>%
group_by(year) %>%
summarize(stolen_auto = n()) %>%
mutate(perc = (stolen_auto / sum(stolen_auto)) * 100)
pg_stolen %>%
group_by(year) %>%
summarize(stolen_auto = n()) %>%
mutate(perc = (stolen_auto / sum(stolen_auto)) * 100)
pg_stolen %>%
group_by(year) %>%
summarize(stolen_autos = n()) %>%
mutate(perc = (stolen_autos / sum(stolen_autos)) * 100)
pg_yearly <- pg_stolen %>%
group_by(year) %>%
summarize(stolen_autos = n()) %>%
mutate(perc = (stolen_autos / sum(stolen_autos)) * 100)
ggplot() +
geom_bar(
data=pg_yearly,
aes(x=year, weight=`stolen_autos`))+
labs(title = "Car thefts in PG county 2019-2022",
caption =  "Source: PG Open Data | Graph by Dylan Manfre")
View(pg_yearly)
# Filter for AUTO, STOLEN & RECOVERED
pg_stolen_recovered_only <- pg_stolen %>%
filter(crime_type == "AUTO, STOLEN & RECOVERED")
pg_stolen_recovered_only %>%
group_by(year) %>%
summarize(
stolen_recovered = n(),
autos_stolen = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(
perc = (autos_stolen / sum(autos_stolen)) * 100,
grand_total = stolen_recovered + autos_stolen)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(
grand_total = stolen_recovered + autos_stolen)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(
grand_total = stolen_recovered + stolen_autos)
pg_stolen_auto %>%
group_by(year, crime_type) %>%
summarize(count = n()) %>%
mutate(perc = (count / sum(count)) * 100)
pg_stolen_auto %>%
group_by(year) %>%
summarize(stolen_auto = n()) %>%
mutate(perc = (stolen_auto / sum(stolen_auto)) * 100)
pg_stolen %>%
group_by(year) %>%
summarize(stolen_auto = n()) %>%
mutate(perc = (stolen_auto / sum(stolen_auto)) * 100)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(
grand_total = stolen_recovered + stolen_autos,
grand_total_perc = (grand_total / sum(grand_total)) * 100)
View(pg_yearly)
pg_stolen %>%
group_by(year) %>%
summarize(stolen_autos = n()) %>%
mutate(perc = (stolen_autos / sum(stolen_autos)) * 100)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(
grand_total = stolen_recovered + stolen_autos,
grand_total_perc = (grand_total / sum(grand_total)) * 100)
View(pg_yearly)
library(tidyverse)
library(janitor)
library(lubridate)
#install.packages('tidygeocoder')
library(tidygeocoder)
#install.packages("curl")
library(curl)
library(ggplot2)
library(ggrepel)
pg_county_crime_old <-  read.csv("data/pg_county_crime.csv")
pg_county_crime_old <- pg_county_crime_old %>%
clean_names() %>%
mutate(date = as.Date(date, "%m/%d/%Y"),
year = year(date),
month = month(date)) %>%
rename(crime_type = clearance_code_inc_type)
#Showing distinct crimes: 22 types of crime here.
pg_county_crime_old %>%
distinct(crime_type)
pg_county_crime_old <- pg_county_crime_old %>%
filter(year >= 2019, year <= 2022)
pg_stolen <- pg_county_crime_old %>%
filter(crime_type == "AUTO, STOLEN" | crime_type == "AUTO, STOLEN & RECOVERED" )
pg_yearly_data <- pg_stolen %>%
group_by(year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(
grand_total = stolen_recovered + stolen_autos,
grand_total_perc = (grand_total / sum(grand_total)) * 100)
ggplot() +
geom_bar(
data=pg_yearly,
aes(x=year, weight=`stolen_autos`))+
labs(title = "Car thefts in PG county 2019-2022",
caption =  "Source: PG Open Data | Graph by Dylan Manfre")
ggplot() +
geom_bar(
data=pg_yearly_data,
aes(x=year, weight=`stolen_autos`))+
labs(title = "Car thefts in PG county 2019-2022",
caption =  "Source: PG Open Data | Graph by Dylan Manfre")
View(pg_yearly_data)
View(pg_stolen)
pg_stolen %>%
group_by(month) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(
grand_total = stolen_recovered + stolen_autos,
grand_total_perc = (grand_total / sum(grand_total)) * 100)
pg_stolen_auto %>%
group_by(month, year) %>%
summarize(autos_stolen = n()) %>%
mutate(month = month(month, label = TRUE))
pg_stolen %>%
group_by(month, year) %>%
summarize(autos_stolen = n()) %>%
mutate(month = month(month, label = TRUE))
pg_stolen %>%
group_by(month, year) %>%
summarize(autos_stolen = n()) %>%
mutate(month = month(month, label = TRUE)) %>%
pivot_wider(names_from = year, values_from = autos_stolen)
pg_stolen %>%
group_by(month, year) %>%
summarize(autos_stolen = n()) %>%
mutate(month = month(month, label = TRUE)) %>%
pivot_wider(names_from = year, values_from = autos_stolen)
pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(Month = month(month, label = TRUE)) %>%
pivot_wider(names_from = year, values_from = autos_stolen)
pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(Month = month(month, label = TRUE)) %>%
pivot_wider(names_from = year, values_from = stolen_autos, stolen_recovered)
pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(Month = month(month, label = TRUE))
pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")
)
pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")) %>%
mutate(month = month(month, label = TRUE))
pg_monthly <- pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")) %>%
mutate(month = month(month, label = TRUE))
View(pg_monthly)
pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN"),
grand_total = stolen_recovered = stolen_autos) %>%
pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN"),
grand_total = stolen_recovered = stolen_autos) %>%
pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN"),
grand_total = stolen_recovered + stolen_autos) %>%
mutate(month = month(month, label = TRUE))
pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN"),
month_total = stolen_recovered + stolen_autos) %>%
mutate(month = month(month, label = TRUE))
pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN"),
month_total = stolen_recovered + stolen_autos) %>%
mutate(month = month(month, label = TRUE)) %>%
arrange(desc(month_total))
pg_monthly <- pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN"),
month_total = stolen_recovered + stolen_autos) %>%
mutate(month = month(month, label = TRUE))
View(pg_monthly)
pg_stolen %>%
group_by(month, year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN"),
month_total = stolen_recovered + stolen_autos) %>%
mutate(month = month(month, label = TRUE))
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_recovered = sum(crime_type == "AUTO, STOLEN & RECOVERED"),
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(
grand_total = stolen_recovered + stolen_autos,
grand_total_perc = (grand_total / sum(grand_total)) * 100)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(
grand_total = stolen_recovered + stolen_autos,
grand_total_perc = (grand_total / sum(grand_total)) * 100)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN")
) %>%
mutate(
grand_total_perc = (grand_total / sum(grand_total)) * 100)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN"))
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN")) %>%
add_row(year = 2023, stolen_autos = 6229)
pg_yearly_data <- pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN")) %>%
add_row(year = 2023, stolen_autos = 6229)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN")) %>%
add_row(year = 2023, stolen_autos = 6229) %>%
mutate(perc_change = (2023 - 2022)/2022)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN")) %>%
add_row(year = 2023, stolen_autos = 6229) %>%
mutate(perc_change = (6229 - 3105)/3105)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN")) %>%
add_row(year = 2023, stolen_autos = 6229) %>%
mutate(perc_change = (6229-3105)/3105)*100)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN")) %>%
add_row(year = 2023, stolen_autos = 6229) %>%
mutate(perc_change = (6229-3105)/3105)*100
pg_yearly_data <- pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN")) %>%
add_row(year = 2023, stolen_autos = 6229) %>%
#mutate(perc_change = (6229-3105)/3105)*100
```
pg_yearly_data <- pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN")) %>%
add_row(year = 2023, stolen_autos = 6229)
pg_stolen %>%
group_by(year) %>%
summarize(
stolen_autos = sum(crime_type == "AUTO, STOLEN")) %>%
add_row(year = 2023, stolen_autos = 6229) %>%
mutate(perc_change = (6229-3105)/3105)*100
